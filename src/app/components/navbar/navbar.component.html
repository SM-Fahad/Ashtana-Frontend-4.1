<nav class="navbar navbar-expand-lg sticky-top navbar-light custom-navbar" id="mainNavbar">
  <div class="container">
    <!-- Brand Logo -->
    <a class="navbar-brand" routerLink="/">
      <img src="assets/Ashtana-preview.png" alt="Ashtana" class="brand-logo">
      <!-- <span class="brand-text">ASHTANA</span> -->
    </a>

    <!-- Mobile Toggle -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <!-- Search Bar - Centered -->
      <div class="search-container mx-auto">
        <form class="d-flex search-form" role="search">
          <div class="input-group">
            <input class="form-control search-input" type="search" placeholder="Search for products, brands and more..."
              aria-label="Search" />
            <button class="btn search-btn" type="submit">
              <i class="bi bi-search"></i>
            </button>
          </div>
        </form>
      </div>

      <!-- Navigation Icons -->
      <div class="navbar-nav ms-auto align-items-center flex-row nav-icons">
        
        <!-- ACCOUNT / USER INFO -->
        <div class="nav-item" *ngIf="isLoggedIn && userName">
          <div class="nav-icon-wrapper">
            <a class="nav-link" routerLink="/profile">
              <div class="icon-container">
                <i class="bi bi-person-circle"></i>
              </div>
              <span class="nav-label">{{ userName }}</span>
            </a>
          </div>
        </div>

        <!-- ADMIN (Only show if user has admin role) -->
        <div class="nav-item" *ngIf="isLoggedIn && isAdmin">
          <div class="nav-icon-wrapper">
            <a class="nav-link" routerLink="/admin">
              <div class="icon-container">
                <i class="bi bi-shield-check"></i>
              </div>
              <span class="nav-label">Admin</span>
            </a>
          </div>
        </div>

        <!-- Favorites -->
        <div class="nav-item">
          <div class="nav-icon-wrapper">
            <a class="nav-link" routerLink="/favorites">
              <div class="icon-container">
                <i class="bi bi-heart"></i>
              </div>
              <span class="nav-label">Favorites</span>
            </a>
          </div>
        </div>

        <!-- Shopping Bag -->
        <div class="nav-item">
          <div class="nav-icon-wrapper">
            <a class="nav-link" routerLink="/bag">
              <div class="icon-container position-relative">
                <i class="bi bi-bag"></i>
                <!-- Cart Count Badge -->
                <span *ngIf="cartCount > 0" class="cart-badge" [class.pulse]="showPulse">
                  {{ cartCount > 99 ? '99+' : cartCount }}
                </span>
              </div>
              <span class="nav-label">Bag</span>
            </a>
          </div>
        </div>

        <!-- Authentication -->
        <div class="nav-item" *ngIf="!isLoggedIn">
          <div class="nav-icon-wrapper">
            <a class="nav-link" routerLink="/login">
              <div class="icon-container">
                <i class="bi bi-box-arrow-in-right"></i>
              </div>
              <span class="nav-label">Login</span>
            </a>
          </div>
        </div>

        <div class="nav-item" *ngIf="!isLoggedIn">
          <div class="nav-icon-wrapper">
            <a class="nav-link" routerLink="/signup">
              <div class="icon-container">
                <i class="bi bi-person-plus"></i>
              </div>
              <span class="nav-label">Sign Up</span>
            </a>
          </div>
        </div>

        <div class="nav-item" *ngIf="isLoggedIn">
          <div class="nav-icon-wrapper">
            <a class="nav-link logout-btn" (click)="logout()" style="cursor: pointer;">
              <div class="icon-container">
                <i class="bi bi-box-arrow-right"></i>
              </div>
              <span class="nav-label">Logout</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>